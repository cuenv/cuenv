---
title: Ignore Files
description: Managing .gitignore, .dockerignore, and other ignore files with cuenv
---

cuenv can generate and manage tool-specific ignore files (`.gitignore`, `.dockerignore`, etc.) from your CUE configuration. This keeps your ignore patterns in a single source of truth alongside your other project configuration.

## Quick Start

Add an `ignore` field to your `env.cue`:

```cue
package cuenv

import "github.com/cuenv/cuenv/schema"

schema.#Project & {
    name: "my-project"

    ignore: {
        git: [
            "node_modules/",
            ".env",
            "*.log",
        ]
        docker: [
            "node_modules/",
            ".git/",
            "*.md",
        ]
    }
}
```

Then run:

```bash
cuenv sync
```

This generates `.gitignore` and `.dockerignore` files in your project directory.

## Commands

### Generate all ignore files

```bash
cuenv sync
```

Runs all sync operations, including ignore file generation.

### Generate only ignore files

```bash
cuenv sync ignore
```

Runs only the ignore file generation.

### Preview changes (dry-run)

```bash
cuenv sync --dry-run
```

Shows what files would be created or updated without actually writing them.

## Configuration

### Simple Patterns

The simplest form is a list of patterns for each tool:

```cue
ignore: {
    git: ["node_modules/", ".env"]
    docker: ["node_modules/", ".git/"]
    npm: ["*.test.js", "__tests__/"]
}
```

Tool names map to ignore files as follows:

- `git` creates `.gitignore`
- `docker` creates `.dockerignore`
- `npm` creates `.npmignore`
- Any tool name `foo` creates `.fooignore`

### Custom Filenames

For tools with non-standard ignore file names, use the extended format:

```cue
ignore: {
    // Standard format
    git: ["node_modules/"]

    // Extended format with custom filename
    custom: {
        patterns: ["*.tmp", "cache/"]
        filename: ".myignore"
    }
}
```

## Output Status

When running `cuenv sync`, you'll see the status of each file:

- **Created** - New file was created
- **Updated** - Existing file was updated with new content
- **Unchanged** - File exists and content matches (no write needed)

In dry-run mode:

- **Would create** - File would be created
- **Would update** - File would be updated

## Security

cuenv sync has built-in security protections:

1. **Git repository required** - `cuenv sync` must be run within a Git repository
2. **Path traversal protection** - Tool names cannot contain path separators (`/`, `\`) or parent directory references (`..`)
3. **Write containment** - Files are only written within the Git repository boundaries

## Examples

### Node.js Project

```cue
ignore: {
    git: [
        "node_modules/",
        "dist/",
        ".env",
        ".env.local",
        "*.log",
        "coverage/",
    ]
    docker: [
        "node_modules/",
        ".git/",
        "*.md",
        "tests/",
        "coverage/",
    ]
    prettier: [
        "dist/",
        "coverage/",
        "*.min.js",
    ]
}
```

### Rust Project

```cue
ignore: {
    git: [
        "target/",
        "Cargo.lock",  // for libraries
        "*.rs.bk",
    ]
    docker: [
        "target/",
        ".git/",
        "*.md",
    ]
}
```

### Python Project

```cue
ignore: {
    git: [
        "__pycache__/",
        "*.py[cod]",
        ".env",
        "venv/",
        ".venv/",
        "*.egg-info/",
        "dist/",
        "build/",
    ]
    docker: [
        "__pycache__/",
        "*.py[cod]",
        ".git/",
        "venv/",
        ".venv/",
        "*.md",
        "tests/",
    ]
}
```

## Cube-Generated Files

When using [Cubes](/how-to/cubes/) for code generation, files can automatically be added to `.gitignore` based on their `gitignore` field.

### How It Works

Files defined in a cube have a `gitignore` field that defaults based on their mode:

- **Managed files** (`mode: "managed"`) default to `gitignore: true`
- **Scaffold files** (`mode: "scaffold"`) default to `gitignore: false`

```cue
cube: {
    files: {
        // This file will be added to .gitignore (managed default)
        "dist/bundle.js": cubes.#JavaScriptFile & {
            mode: "managed"
            content: "..."
        }

        // This file won't be in .gitignore (scaffold default)
        "src/main.ts": cubes.#TypeScriptFile & {
            mode: "scaffold"
            content: "..."
        }

        // Override the default explicitly
        "generated/api-types.ts": cubes.#TypeScriptFile & {
            mode: "managed"
            gitignore: false  // Commit this generated file
            content: "..."
        }
    }
}
```

### Combined Output

When you have both project-level ignore patterns and cube files with `gitignore: true`, they're combined in the generated `.gitignore`:

```gitignore
# Generated by cuenv - do not edit
# Source: env.cue

# Project ignores
node_modules/
.env
*.log

# Cube-generated files
dist/bundle.js
config/generated.json
```

This ensures generated files stay out of version control automatically.

## Generated File Format

Generated ignore files include a header comment indicating they're managed by cuenv:

```gitignore
# Generated by cuenv - do not edit
# Source: env.cue

node_modules/
.env
*.log
```

This helps prevent accidental manual edits that would be overwritten on the next sync.
