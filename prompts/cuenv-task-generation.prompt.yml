name: CUE Task Generation
description: Test if LLM can generate valid cuenv task definitions from llms.txt context
model: openai/gpt-5
modelParameters:
  temperature: 0.3
  max_tokens: 512
messages:
  - role: system
    content: |
      You are a cuenv configuration assistant. Generate valid CUE task definitions based on the user's requirements.
      Use the following cuenv documentation as your reference:

      {{llms_context}}
  - role: user
    content: |
      Generate a cuenv task definition for: {{task_description}}

      Output only the CUE code, no explanations.
testData:
  - task_description: "Run npm tests in parallel with linting"
    expected: |
      test: {
        unit: { command: "npm", args: ["test"] }
        lint: { command: "npm", args: ["run", "lint"] }
      }
  - task_description: "Sequential Docker build and push"
    expected: |
      deploy: [
        { command: "docker", args: ["build", "-t", "app", "."] }
        { command: "docker", args: ["push", "app"] }
      ]
  - task_description: "Build task that depends on test completing first"
    expected: |
      build: {
        command: "npm"
        args: ["run", "build"]
        dependsOn: ["test"]
      }
evaluators:
  - name: Similarity to expected
    uses: github/similarity
  - name: Contains command field
    string:
      contains: "command"
  - name: Valid task structure
    string:
      contains: "args"
